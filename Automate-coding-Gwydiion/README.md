# I. Brief Description 
This document explains how to use the built-in Python functionality of Gwyddion to batch-process images
from “.sm4” files. There are two codes: one generates the topographies of multiple “.sm4” files; the other
generates FFT’s (Fast Fourier Transforms) of the files. The following sections explain how to use these
codes.
Note: The Python functionality in Gwyddion, known as “Pygwy”, is only available on the 32-bit
version of Gwyddion, as of this writing. To enable Pygwy, Python and a few Python modules must also be
installed. The files required and the process of installing these files is described in the Gwyddion user guide
(a pdf version can be found at http://gwyddion.net/download/user-guide/gwyddion-user-guide-en.pdf).
For these instructions, a computer running Windows 10 was used.
# II. Contents
## 1) Topography 
2 FFT 4
1 Topography
1. Open Gwyddion and make sure the color gradient is best for topographies. Do this by clicking “Edit”
and then clicking “Color Gradients...”. Then find “Gold” in the list of gradients, click it and then
click the “star” button at the bottom of the Color Gradients window (this makes the Gold color
default). Close the Color Gradients window.
2. In Gwyddion, click on “Data Process”, then click on “Pygwy Console”. Once this console opens, click
“Open”, find the folder where the code, “Topography”, is stored and open the code. The window
with the code should look like this:
Alternative Method: It is possible that the code will not show in the “Open” window. In this
case, right click the “Topography” code in the folder in which it is present and open it with Notepad.
Copy all the contents of the file and paste them in the Pygwy Console. Save this code to the desired
location (it is not necessary for the code to be present in the same location as the files to be processed)
by clicking “Save” in the Pygwy Console. This should fix the issue.
3. The code needs to be modified slightly every time a different folder is used to store the processed
1
images. Do this by going to the folder where the processed images are to be stored and copy the
directory by clicking on the folder’s name (the area to be clicked is shown in the black box below):
Copy the directory name and paste it in the corresponding area of line 3 of the code. This area is
shown in the black box below:
The naming of the processed files can also be modified. For example, the code above will label the files “CeTe2 1”, “CeTe2 2”, “CeTe2 3” and so on. If a different name is to be given,
change the part of line 3 following the black box above. For example, changing “CeTe2 %d.png”
to “CeTe2 %d example.png” in the code will label the files “CeTe2 1 example”, “CeTe2 2 example”,
“CeTe2 3 example” and so on.
Note: The “%d” part of the code is essential in correctly numbering the files.
4. Open the “.sm4” files for which the topographies need to be generated by clicking on “File” in the
main Gwyddion window, and then clicking “Open”. Then select the files by clicking the first file that
needs to be analyzed, holding the shift button on the keyboard, scrolling down to the last file that
needs to be analyzed, and then clicking on that last file. This should highlight the files you want to
open. Click “Open”.
IMPORTANT:
• The code can only run a certain number of files at a time! This number will vary according
to the computer being used, so it is important to test the number of files that Gwyddion can
handle without crashing.
• Since the code cannot recognize the names of the “.sm4” files, care must be taken to make sure
that the numbering of files is correct. For example, if files 251-300 of a certain directory are
being analyzed (i.e. 50 files are being analyzed), ensure that 50 files are selected. If, for example,
file 275 is missing, then the code will not know this and will number some of the files incorrectly.
In this case, you can create a “dummy” file by copying any other “.sm4” file, pasting it to the
source folder (where the “.sm4” files to be analyzed are located), and renaming it “275”. This
will ensure that the numbering of files is preserved - you can then get rid of this file once all
files in the directory have been analyzed. Another option is to analyze analyze files 251-274 first
and then analyze files 276-300.
5. Since the code can only handle a certain number of files at a time, the number of the last file needs
to be updated in the code every time it is run. Enter this number in line 7 of the code. For example,
2
if images 251-300 of a directory are being analyzed, enter “300” in line 7. Then click “Execute” in
the Pygwy Console. This should display an export window like the one below:
This window can be used to modify the images that will be produced. For example, the scale bars
can be changed. These changes will then automatically apply to all files that are being processed at
a given time. Click “OK” - this will process all the images and store them in the folder that was
specified in step (3.) above.
6. Even though the code closes the files that were opened, Gwyddion continues to use the computer’s
memory. For this reason, every now and then (depending on the computer), Gwyddion will need to
be closed so that it does not crash the next time the code is run. Therefore, close Gwyddion and
open it again. Click on “Data Process”, then click on “Pygwy Console”. Click on the arrow next
to “Open” in the console and click the first file that shows up (this is the code you just closed). If
the same directory of files is being analyzed, then simply repeat steps (4.) through (6.) until the
topographies of all desired files have been generated.
3
2 FFT
1. Open Gwyddion and make sure the color gradient is best for FFT. Do this by clicking “Edit” and
then clicking “Color Gradients...”. Then find “DFit” in the list of gradients, click it and then click
the “star” button at the bottom of the Color Gradients window (this makes the color default). Close
the Color Gradients window.
2. In Gwyddion, click on “Data Process”, then click on “Pygwy Console”. Once this console opens,
click “Open”, find the folder where the code, “FFT”, is stored and open the code. The window with
the code should look like this:
Note: It is possible that the code will not show in the “Open” window. In this case, right click
4
the “FFT” code in the folder in which it is present and open it with Notepad. Copy all the contents
of the file and paste them in the Pygwy Console. Save this code to the desired location (it is not
necessary for the code to be present in the same location as the files to be processed) by clicking
“Save” in the Pygwy Console. This should fix the issue.
3. The code needs to be modified slightly every time a different folder is used to store the processed
images. Do this by going to the folder where the processed images are to be stored and copy the
directory by clicking on the folder’s name (the area to be clicked is shown in the black box below):
Copy the directory name and paste it in the corresponding area of line 3 of the code. This area is
shown in the black box below:
The naming of the processed files can also be modified. For example, the code above will label
the files “CeTe2 1 fft”, “CeTe2 2 fft”, “CeTe2 3 fft” and so on. If a different name is to be given,
change the part of line 3 following the black box above. For example, changing “CeTe2 %d fft.png”
to “CeTe2 %d example.png” in the code will label the files “CeTe2 1 example”, “CeTe2 2 example”,
“CeTe2 3 example” and so on.
Note: The “%d” part of the code is essential in correctly numbering the files.
4. Open the “.sm4” files for which the FFT’s need to be generated by clicking on “File” in the main
Gwyddion window, and then clicking “Open”. Then select the files by clicking the first file that needs
to be analyzed, holding the shift button on the keyboard, scrolling down to the last file that needs
to be analyzed, and then clicking on that last file. This should highlight the files you want to open.
Click “Open”.
IMPORTANT:
• The code can only run a certain number of files at a time! This number will vary according
to the computer being used, so it is important to test the number of files that Gwyddion can
handle without crashing.
• Since the code cannot recognize the names of the “.sm4” files, care must be taken to make sure
that the numbering of files is correct. For example, if files 251-300 of a certain directory are
being analyzed (i.e. 50 files are being analyzed), ensure that 50 files are selected. If, for example,
file 275 is missing, then the code will not know this and will number some of the files incorrectly.
In this case, you can create a “dummy” file by copying any other “.sm4” file, pasting it to the
source folder (where the “.sm4” files to be analyzed are located), and renaming it “275”. This
will ensure that the numbering of files is preserved - you can then get rid of this file once all
files in the directory have been analyzed. Another option is to analyze files 251-274 first and
then analyze files 276-300.
5
5. Since the code can only handle a certain number of files at a time, the number of the last file needs
to be updated in the code every time it is run. Enter this number in line 7 of the code. For example,
if images 251-300 of a directory are being analyzed, enter “300” in line 7. Then click “Execute” in
the Pygwy Console. This should display an export window like the one below:
This window can be used to modify the images that will be produced. For example, the scale bars
can be changed. These changes will then automatically apply to all files that are being processed at
a given time. Click “OK” - this will process all the images and store them in the folder that was
specified in step (3.) above.
6. Even though the code closes the files that were opened, Gwyddion continues to use the computer’s
memory. For this reason, every now and then (depending on the computer), Gwyddion will need to
be closed so that it does not crash the next time the code is run. Therefore, close Gwyddion and
open it again. Click on “Data Process”, then click on “Pygwy Console”. Click on the arrow next to
“Open” in the console and click the first file that shows up (this is the code you just closed). If the
same directory of files is being analyzed, then simply repeat steps (4.) through (6.) until the FFT’s
of all desired files have been generated.

